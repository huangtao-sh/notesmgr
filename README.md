个人笔记整理软件
======

简介
----

最近开始使用emacs的org-mode来编写笔记，作为一个懒人希望可以实现快捷键一键打开索引文件，一键新建笔记，并能实现存档、重建索引功能。

前面两个功能已用elisp在emacs中实现，由于elisp不太熟悉，故自动存档和重建索引需要使用python来实现。

基本定义
-----
- 笔记文件
  笔记文件是采用emacs编写的org或md笔记文件，主要用来编写一些想法、工作安排、经验等。

- 索引文件
  索引文件是根目录下的一个标准的org文件，用于建立所有笔记的索引记录。打开索引文件后可以通过超连接直接打开相应的笔记文件。

- 索引目录
  所有的笔记在索引目录中均应有相应的目录，索引的目录根据预设的规则自动建立。同一个笔记可以根据规则储存在所有的索引目录下。一条笔记可以显示在多个目录下。

- 笔记目录
  笔记目录是储存笔记文件的真实目录，其目录有两个，一个是正在编辑的目录“笔记“，其他的是存档目录。存档目录由本程序根据预设规则自动创建。每个笔记只会储存在同一个笔记目录下。

处理流程
------

1. 读入索引文件
   首先读入索引文件，并解析出目录中所有的笔记文件，并解析出笔记名称、文件路径、创建时间、修改时间及摘要等信息。

2. 读入规则文件
   规则文件存放在笔记根目录下，采用ini文件格式。其格式为：

	路径 = TAG | （TAG & TAG ）

	其中：！表示逻辑非，& 表示逻辑与；|表示逻辑或，（）表示优先级

3. 扫描笔记文件
   扫描笔记根目录下所有的笔记文件（即以.md或.org为扩展名的文件），并更新索引文件。

	如笔记文件的修改时间比索引文件中的更新时间新，则读取并更新索引文件中的相应信息。

4. 删除不存在的笔记
   根据扫描文件的结果，删除索引文件中已不存在的笔记。

5. 重新调整文件目录
   根据规则，重新调整文件的储存路径，并进行移动相应的笔记。

6. 重新写入索引文件
   根据规则重新建立索引文件，并将索引文件写入磁盘。
